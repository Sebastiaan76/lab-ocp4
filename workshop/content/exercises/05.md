In this lab you will launch a database and configure your application to use the database instead of the build-in database.

 - _FIXME: Change to using AWS Service Operator or Boker_

Launch a database and connect the application to it:

Run this to start a MySQL container:

```execute
oc new-app --name db mysql:5.7 \
   -e MYSQL_USER=user \
   -e MYSQL_PASSWORD=password \
   -e MYSQL_DATABASE=vote 
```

MySQL will be started and configured as shown in the command arguments. 

Take a look at the log output:

```execute
oc logs dc/db
```

Wait for the database to be running.  You will see ``ready for connections`` in the log output. 

At this point in time, the application has no idea about the existence of the MySQL database. You need to re-configure the application to use the new database. 
To do that we need to change the vote application's environment variables and re-launch the pod. 

Connect the application to the database:

```execute
oc set env dc vote-app \
   ENDPOINT_ADDRESS=db \
   PORT=3306 \
   DB_NAME=vote \
   MASTER_USERNAME=user \
   MASTER_PASSWORD=password \
   DB_TYPE=mysql
```

The above command sets the environment variables as stated in the arguments. The deployment configuration restarts the pod because of the configuration change.

Check the database is now populated:

```execute
mysql -h localhost -u root -D vote -e "show tables"
```

FIXME: Use this to fetch pod name

```
POD=`oc get pods --selector app=workspace -o jsonpath='{.items[?(@.status.phase=="Running")].metadata.name}'`; echo $POD
```

```execute
oc rsh db-1-g568s bash -c 'mysql -h localhost -u root -D vote -e "show tables"'
```


In this lab you have launched a database and connected the application to it.  
Now, the application is no longer  dependent on the built-in database and can freely scale out if needed. 

In the next lab ... FIXME


